#!/bin/bash

# Function: apps_interface
apps_interface() {
    local app_name=$1
    local config_path="/pg/config/${app_name}.cfg"
    local default_appdata_path="/pg/appdata/${app_name}"

    # Display the deployment header
    echo "App Deployment: $app_name"
    echo ""

    # Create config file if it doesn't exist
    if [[ ! -f "$config_path" ]]; then
        touch "$config_path"
    fi

    # Set default appdata path if not set in config
    if ! grep -q '^appdata_path=' "$config_path"; then
        echo "appdata_path=${default_appdata_path}" >> "$config_path"
    fi

    # Read appdata_path from the config file
    source "$config_path"
    
    # Ensure the appdata directory exists and is executable
    if [[ ! -d "$appdata_path" ]]; then
        mkdir -p "$appdata_path"
        chmod +x "$appdata_path"
    fi

    # Menu
    while true; do
        clear
        echo "App Deployment: $app_name"
        echo ""
        echo "1) Appdata Path: $appdata_path"
        echo "Z) Exit"
        echo ""

        read -p "Choose an option: " choice

        case $choice in
            1)
                echo "Appdata Path: $appdata_path"
                read -p "Press Enter to continue..."
                ;;
            Z|z)
                break
                ;;
            *)
                echo "Invalid option, please try again."
                read -p "Press Enter to continue..."
                ;;
        esac
    done
}
